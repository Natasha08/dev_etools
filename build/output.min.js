var mysql=require("mysql"),express=require("express"),path=require("path"),favicon=require("serve-favicon"),logger=require("morgan"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),expressSession=require("express-session"),passport=require("passport"),LocalStrategy=require("passport-local").Strategy,connection=require("./public/javascripts/require.js"),routes=require("./routes/index"),routesg=require("./routes/egym"),routesf=require("./routes/efridge"),app=express();app.set("views",path.join(__dirname,"views")),app.set("view engine","ejs"),app.use(logger("dev")),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(expressSession({secret:process.env.SESSION_SECRET||"woiefjwafo;ajwefoewifjaweof;jiawef;oweijf;awoefijaw;foijew;eofijaeofjef'pweofFJEAFIOAEJFALRJ3P28U4TO3WF5ILGJ;OTIJWE;T/OIJTGWPAIT'JKL/MQRA;wozesnfpoaij;eirjw;3eorakljtmw;isoejta",resave:!1,saveUninitialized:!1})),app.use(require("less-middleware")(path.join(__dirname,"public"))),app.use(express["static"](path.join(__dirname,"public"))),app.use(passport.initialize()),app.use(passport.session()),passport.use("local-login",new LocalStrategy({usernameField:"email",passwordField:"password",passReqToCallback:!0},function(a,b,c,d){connection.query("SELECT * FROM `users` WHERE `email` = '"+b+"'",function(a,b){return a?d(a):b.length?b[0].password!=c?d(null,!1):d(null,b[0]):d(null,!1)})})),passport.serializeUser(function(a,b){b(null,a.id)}),passport.deserializeUser(function(a,b){connection.query("select * from users where id = "+a,function(a,c){b(a,c[0])})}),app.use("/",routes),app.use("/",routesg),app.use("/",routesf),app.use(function(a,b,c){var d=new Error("Not Found");d.status=404,c(d)}),"development"===app.get("env")&&app.use(function(a,b,c,d){c.status(a.status||500),c.render("error",{message:a.message,error:a})}),module.exports=app;var express=require("express"),routerf=express.Router(),mysql=require("mysql"),connection=require("../public/javascripts/require"),expressSession=require("express-session"),passport=require("passport"),passportLocal=require("passport-local");routerf.get("/logout",function(a,b){a.logout(),b.redirect("/")}),routerf.get("/efridge",function(a,b,c){var d;connection.query("select * from  efridge",function(c,e){d=e,b.render("efridge",{title:"My e-tools",description:"Enter the name of the food in your e-fridge that you want to add to today's meal.",data:d,isAuthenticated:a.isAuthenticated(),user:a.user})})}),routerf.post("/efridge",function(a,b,c){var d={food_name:a.body.food_name,brand:a.body.brand,serving_size:a.body.serving_size,total_calories:a.body.total_calories,fat_grams:a.body.fat_grams,carbohydrate_grams:a.body.carbohydrate_grams,protein_grams:a.body.protein_grams,total_grams:a.body.total_grams};connection.query("insert into efridge set ?",d,function(a,c){return a?void console.error(a):void b.redirect("/efridge")})}),module.exports=routerf;var express=require("express"),routerg=express.Router(),mysql=require("mysql"),connection=require("../public/javascripts/require"),expressSession=require("express-session"),passport=require("passport"),passportLocal=require("passport-local");routerg.get("/egym",function(a,b,c){var d;connection.query("select * from  egym",function(c,e){d=e,c||b.render("egym",{title:"My e-tools",description:"Checkout your workouts!",data:d,isAuthenticated:a.isAuthenticated(),user:a.user}),c&&console.log(c)})}),routerg.get("/logout",function(a,b){a.logout(),b.redirect("/")}),module.exports=routerg;var express=require("express"),router=express.Router(),mysql=require("mysql"),connection=require("../public/javascripts/require"),expressSession=require("express-session"),passport=require("passport"),passportLocal=require("passport-local");router.get("/logout",function(a,b){a.logout(),b.redirect("/")}),router.get("/",function(a,b,c){b.render("index",{title:"MyColo",isAuthenticated:a.isAuthenticated(),user:a.user})}),router.post("/login",passport.authenticate("local-login",{failureRedirect:"/"}),function(a,b){b.redirect("/")}),router.post("/register",function(a,b,c){var d={email:a.body.userEmail,firstname:a.body.firstName,lastname:a.body.lastName,username:a.body.userName,password:a.body.passWord};connection.query("insert into users set ?",d,function(a,c){return a?(console.error(a),void b.render("index",{title:"MyColo",erobj:"Please enter a valid and unique email address."})):void b.redirect("/")})}),module.exports=router,function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){var a=document.getElementById("registerDiv");a.hasAttribute("hidden")?a.removeAttribute("hidden"):console.log("err")}var e=document.getElementById("btntest4");e.addEventListener("click",d,!1),b.exports=d,b.exports=e},{}]},{},[1]),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){var a=document.getElementById("foodData"),b=document.getElementById("dataSearch");a.hasAttribute("hidden")?(a.removeAttribute("hidden"),b.removeAttribute("hidden"),foodProfile.setAttribute("hidden","true")):console.log("err")}function e(){var a=document.getElementById("foodProfile");a.hasAttribute("hidden")?(a.removeAttribute("hidden"),foodData.setAttribute("hidden","true"),dataSearch.setAttribute("hidden","true")):console.log("err")}var f=document.getElementById("btntest3");f.addEventListener("click",d,!1);var g=document.getElementById("btntest1");g.addEventListener("click",e,!1),b.exports=d,b.exports=e,b.exports=g},{}]},{},[1]);var mysql=require("mysql"),connection=mysql.createConnection({host:"localhost",user:"tulsi",password:"Vala2114!",database:"freetools"});connection.query("USE freetools"),module.exports=connection;